{% extends 'base.html' %}
{% load static %}

{% block extra-style %}
<style>
    main{
      font-family: 'NanumSquareRound';
    }

    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }

    .b-example-divider {
      width: 100%;
      height: 3rem;
      background-color: rgba(0, 0, 0, .1);
      border: solid rgba(0, 0, 0, .15);
      border-width: 1px 0;
      box-shadow: inset 0 .5em 1.5em rgba(0, 0, 0, .1), inset 0 .125em .5em rgba(0, 0, 0, .15);
    }

    .b-example-vr {
      flex-shrink: 0;
      width: 1.5rem;
      height: 100vh;
    }

    .bi {
      vertical-align: -.125em;
      fill: currentColor;
    }

    .nav-scroller {
      position: relative;
      z-index: 2;
      height: 2.75rem;
      overflow-y: hidden;
    }

    .nav-scroller .nav {
      display: flex;
      flex-wrap: nowrap;
      padding-bottom: 1rem;
      margin-top: -1px;
      overflow-x: auto;
      text-align: center;
      white-space: nowrap;
      -webkit-overflow-scrolling: touch;
    }

    .btn-bd-primary {
      --bd-violet-bg: #712cf9;
      --bd-violet-rgb: 112.520718, 44.062154, 249.437846;

      --bs-btn-font-weight: 600;
      --bs-btn-color: var(--bs-white);
      --bs-btn-bg: var(--bd-violet-bg);
      --bs-btn-border-color: var(--bd-violet-bg);
      --bs-btn-hover-color: var(--bs-white);
      --bs-btn-hover-bg: #6528e0;
      --bs-btn-hover-border-color: #6528e0;
      --bs-btn-focus-shadow-rgb: var(--bd-violet-rgb);
      --bs-btn-active-color: var(--bs-btn-hover-color);
      --bs-btn-active-bg: #5a23c8;
      --bs-btn-active-border-color: #5a23c8;
    }

    .bd-mode-toggle {
      z-index: 1500;
    }

    .bd-mode-toggle .dropdown-menu .active .bi {
      display: block !important;
    }

    .fw-normal{
      margin-top : 25px;
    }
    .carousel-1{
      margin-bottom : 15px;
    }

    .carousel-1 button{
      width:30px; 
      height:30px;
      margin-top : 50px;
    }

    .container_product{
      margin-top : 100px;
      text-align : center;
    }
    .container-list{
      margin-top : 90px;
    }
    .product-slider{
      display: block;
      justify-content: center;
      align-items :center;
      text-align : center;
      margin-top : 50px;
    }
      .product-card {
          transition: transform .2s; /* 애니메이션 효과 */
          cursor: pointer;
      }
      .product-card:hover {
          transform: scale(1.05); /* 마우스 오버시 카드 확대 */
          box-shadow: 0 4px 8px rgba(0,0,0,.1); /* 그림자 효과 */
      }
      .product-image {
          height: 200px; /* 이미지 높이 고정 */
          object-fit: cover; /* 이미지 비율 유지 */
      }
      .card-body {
          height: 180px; /* 카드 바디 높이 고정 */
          display: flex;
          flex-direction: column;
      }
      .card-text {
          font-size: 14px; /* 폰트 크기 조정 */
      }
      .product-price {
          font-weight: bold; /* 가격 굵게 */
      }


    

  </style>
  {% endblock %}

  <link href="{% static 'carousel.css' %}" rel="stylesheet">
  <!-- Bootstrap CSS -->
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">


{% block content %}
<main>

<div id="myCarousel" class="carousel slide mb-6" data-bs-ride="carousel">
  <div class="carousel-indicators">
    <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
    <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
  </div>
  <div class="carousel-inner">
    <div class="carousel-item active" style="background-color: #c5e3ed;">
      <img src="{% static 'banner1.png' %}" class="d-flex w-75 m-auto" height="450px" alt="Image Caption">
      <div class="container">
        <div class="carousel-caption text-end">
          <a class="btn btn-lg btn-info" style="margin-right : 20px; margin-bottom: 20px; color: white; font-weight : 600;" href="{% url 'product:product_list' %}">마켓 보러가기 &nbsp;<img style="width : 9px;"src="{% static 'arrow.png' %}"></a>
        </div>
      </div>
    </div>
    <div class="carousel-item" style="background-color : #fbf7ec;">
      <img src="{% static 'banner_2.png' %}" class="d-flex w-75 m-auto text-white" height="450px" alt="Image Caption">      
      <div class="container">
        <div class="carousel-caption text-start">
          <p><a class="btn btn-lg btn-success" style="font-weight : 600;"href="{% url 'feed:index' %}"> 농장 이야기 &nbsp;<img style="width : 9px;"src="{% static 'arrow.png' %}"></a></p>
        </div>
      </div>
    </div>
  </div>
  <button class="carousel-control-prev m-auto" type="button" data-bs-target="#myCarousel" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#myCarousel" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>

<div class="container marketing" style="margin-top: 80px;">
  <div class="row">
    <div class="col-lg-4" style="text-align:center;">
      <img src="{% static 'icon_1.png' %}" style= "width: 100px; height: auto" alt="Image Caption">
      <h2 class="fw-normal">가장 소량씩, 가장 신선하게</h2>
      <p>적은 양으로 부담없이 즐겨요.</p>
    </div><!-- /.col-lg-4 -->
    <div class="col-lg-4" style="text-align:center;">
      <img src="{% static 'icon_2.png' %}" style= "width: 100px; height: auto" alt="Image Caption">      
      <h2 class="fw-normal">친환경 채소를 가장 저렴하게!</h2>
      <p>30% OFF, 합리적인 가격으로 만나요!</p>
    </div><!-- /.col-lg-4 -->
    <div class="col-lg-4" style="text-align:center;">
      <img src="{% static 'icon_3.png' %}" style= "width: 100px; height: auto" alt="Image Caption">      
      <h2 class="fw-normal">환경에 한 발 나은 선택</h2>
      <p>환경에 더 가까운 생산과 소비를 지지해요.</p>
    </div><!-- /.col-lg-4 -->
  </div><!-- /.row -->

  <!--판매상품 슬라이드-->

  <div id="productCarousel" class="carousel slide" data-ride="carousel" style="margin-top : 170px;">
    <div class="carousel-inner">
      <p style="text-align : center; font-size:3rem; font-weight: 500;">판매 상품</p>

      <!-- 이전/다음 버튼 -->
      <div class="carousel-1">
        <button class="carousel-control-prev carousel-btn" type="button" data-target="#productCarousel" data-slide="prev">
          <img src="{% static 'pre_btn.png' %}" alt="Previous" aria-hidden="true" style="width:30px; height:auto;">
        </button>
  
      <!-- 다음 버튼 -->
        <button class="carousel-control-next carousel-btn" type="button" data-target="#productCarousel" data-slide="next">
          <img src="{% static 'next_btn.png' %}" alt="Next" aria-hidden="true" style="width:30px; height:auto;">
        </button>
      </div>

        <!-- 제품 그룹 1 -->
        <div class="carousel-item active">
            <div class="row">
              {% for product in products %}
              {% if forloop.counter0 >= 0 and forloop.counter0 < 4 %}
                  <div class="col-md-3 mb-4">
                      <div class="card product-card">
                          <a href="{% url 'product:product_detail' product.id %}" class="text-dark text-decoration-none">
                              {% with product.images.first as image %}
                                  {% if image %}
                                      <img src="{{ image.image_url }}" class="card-img-top product-image" alt="{{ product.name }} 이미지">
                                  {% else %}
                                      <img src="https://placehold.co/300x200" class="card-img-top product-image" alt="기본 이미지">
                                  {% endif %}
                              {% endwith %}
                              <div class="card-body">
                                  <h5 class="card-title">{{ product.name }}</h5>
                                  <p class="card-text">{{ product.description|truncatewords:2 }}</p>
                                  <p class="card-text product-price">가격: {{ product.price }}원</p>
                              </div>
                          </a>
                      </div>
                  </div>
              {% endif %}
          {% endfor %}
          
            </div>
        </div>

        <!-- 제품 그룹 2 -->
        <div class="carousel-item">
            <div class="row">
                {% for product in products %}
                    {% if forloop.counter0 >= 4 and forloop.counter0 < 8 %}  <!-- 다음 4개의 제품을 두 번째 그룹으로 설정 -->
                        <div class="col-md-3 mb-4">
                            <!-- 제품 카드 코드 -->
                            <div class="card product-card">
                                <a href="{% url 'product:product_detail' product.id %}" class="text-dark text-decoration-none">
                                    {% if product.image %}
                                        <img src="{{ product.image.url }}" class="card-img-top product-image" alt="{{ product.name }} 이미지">
                                    {% else %}
                                        <img src="https://placehold.co/300x200" class="card-img-top product-image" alt="기본 이미지">
                                    {% endif %}
                                    <div class="card-body">
                                        <h5 class="card-title">{{ product.name }}</h5>
                                        <p class="card-text">{{ product.description|truncatewords:2 }}</p>
                                        <p class="card-text product-price">가격: {{ product.price }}원</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
      
        <!-- 이하 그룹 추가 (제품 개수에 따라 동적으로 그룹을 추가할 수 있음) -->
        
    </div>
</div>

 <!-- jQuery -->
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  
 <!-- Bootstrap JS (with Popper.js) -->
 <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>

<script>
  $(document).ready(function(){
      // 페이지가 로드될 때 Carousel을 초기화
      $('#productCarousel').carousel();

      // 이전 버튼 클릭 시
      $('.carousel-control-prev').click(function(){
          $('#productCarousel').carousel('prev');
      });

      // 다음 버튼 클릭 시
      $('.carousel-control-next').click(function(){
          $('#productCarousel').carousel('next');
      });
  });
</script>
{% endblock %}
